# runs skim locally to check that things work locally

make clean
make cmssw -j 8

### preUL
###python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Fall17_102X_local.list --verbose --dryrun
###./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/RunIIFall17NanoAODv7/TTJets_TuneCP5_13TeV-madgraphMLM-pythia8/NANOAODSIM/PU2017_12Apr2018_Nano02Apr2020_102X_mc2017_realistic_v8-v1/120000/F3599A49-3B70-F545-9132-CEFEA4E5650F.root -ofile=TTJets_TuneCP5_13TeV-madgraphMLM-pythia8_Fall17_102X.root -tree=Events -dataset=TTJets_TuneCP5_13TeV-madgraphMLM-pythia8 -filetag=Fall17_102X -eventcount=./Fall17_102X_local/config/EventCount.root -filtereff=./Fall17_102X_local/config/FilterEff.root -json=./Fall17_102X_local/config/GRL_JSON.txt -pu=./Fall17_102X_local/config/PU/ -btag=./Fall17_102X_local/config/BtagSF/ -lep=./Fall17_102X_local/config/LepSF/ -jme=./Fall17_102X_local/config/JME/ -metfile=./Fall17_102X_local/config/METTrigger/Parameters.csv -prefirefile=./Fall17_102X_local/config/Prefire/Prefire.root -xsjsonfile=./Fall17_102X_local/config/XS_jsonfile.json -githash=local_test -split=1,25

# preUL SMS
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Fall17_102X_SMS_T1.list --verbose --sms --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/RunIIFall17NanoAODv7/SMS-T1bbbb_TuneCP2_13TeV-madgraphMLM-pythia8/NANOAODSIM/PUFall17Fast_Nano02Apr2020_102X_mc2017_realistic_v8_ext1-v1/120000/216A6718-BD33-C44C-ABF5-6662FBF2149C.root -ofile=SMS-T1bbbb_TuneCP2_13TeV-madgraphMLM-pythia8_Fall17_102X_SMS.root -tree=Events -dataset=SMS-T1bbbb_TuneCP2_13TeV-madgraphMLM-pythia8 -filetag=Fall17_102X --sms -eventcount=./Fall17_102X_SMS_T1/config/EventCount.root -filtereff=./Fall17_102X_SMS_T1/config/FilterEff.root -json=./Fall17_102X_SMS_T1/config/GRL_JSON.txt -pu=./Fall17_102X_SMS_T1/config/PU/ -btag=./Fall17_102X_SMS_T1/config/BtagSF/ -lep=./Fall17_102X_SMS_T1/config/LepSF/ -jme=./Fall17_102X_SMS_T1/config/JME/ -metfile=./Fall17_102X_SMS_T1/config/METTrigger/Parameters.csv -prefirefile=./Fall17_102X_SMS_T1/config/Prefire/Prefire.root -xsjsonfile=./Fall17_102X_SMS_T1/config/XS_jsonfile.json -githash=local_test -split=1,50

# UL 17
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer20UL17_106X_local.list --verbose --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/RunIISummer20UL17NanoAODv9/TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8/NANOAODSIM/106X_mc2017_realistic_v9-v1/50000/FB69BFDF-ADD5-8944-AA33-681E611906DC.root -ofile=TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8_Summer20UL17_106X.root -tree=Events -dataset=TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8 -filetag=Summer20UL17_106X -eventcount=./Summer20UL17_106X_local/config/EventCount.root -filtereff=./Summer20UL17_106X_local/config/FilterEff.root -json=./Summer20UL17_106X_local/config/GRL_JSON.txt -pu=./Summer20UL17_106X_local/config/PU/ -btag=./Summer20UL17_106X_local/config/BtagSF/ -lep=./Summer20UL17_106X_local/config/LepSF/ -jme=./Summer20UL17_106X_local/config/JME/ -metfile=./Summer20UL17_106X_local/config/METTrigger/Parameters.csv -prefirefile=./Summer20UL17_106X_local/config/Prefire/Prefire.root -xsjsonfile=./Summer20UL17_106X_local/config/XS_jsonfile.json -githash=local_test -split=1,150

# UL 18
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer20UL18_106X_local.list --verbose --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/RunIISummer20UL18NanoAODv9/TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8/NANOAODSIM/106X_upgrade2018_realistic_v16_L1v1-v1/2820000/DE24B5F0-6392-474E-B8B0-06AD778CF1CB.root -ofile=TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8_Summer20UL18_106X.root -tree=Events -dataset=TTJets_DiLept_TuneCP5_13TeV-madgraphMLM-pythia8 -filetag=Summer20UL18_106X -eventcount=./Summer20UL18_106X_local/config/EventCount.root -filtereff=./Summer20UL18_106X_local/config/FilterEff.root -json=./Summer20UL18_106X_local/config/GRL_JSON.txt -pu=./Summer20UL18_106X_local/config/PU/ -btag=./Summer20UL18_106X_local/config/BtagSF/ -lep=./Summer20UL18_106X_local/config/LepSF/ -jme=./Summer20UL18_106X_local/config/JME/ -metfile=./Summer20UL18_106X_local/config/METTrigger/Parameters.csv -prefirefile=./Summer20UL18_106X_local/config/Prefire/Prefire.root -xsjsonfile=./Summer20UL18_106X_local/config/XS_jsonfile.json -githash=local_test -split=1,100

# Run3 23BPix
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer23BPix_130X_local.list --verbose --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/Run3Summer23BPixNanoAODv12/TTto2L2Nu-2Jets_TuneCP5_13p6TeV_amcatnloFXFX-pythia8/NANOAODSIM/130X_mcRun3_2023_realistic_postBPix_v2-v2/2820000/80b69952-5e0f-4211-ad3c-77603061f0b1.root -ofile=TTto2L2Nu-2Jets_TuneCP5_13p6TeV_amcatnloFXFX-pythia8_Summer23BPix_130X.root -tree=Events -dataset=TTto2L2Nu-2Jets_TuneCP5_13p6TeV_amcatnloFXFX-pythia8 -filetag=Summer23BPix_130X -eventcount=./Summer23BPix_130X_local/config/EventCount.root -filtereff=./Summer23BPix_130X_local/config/FilterEff.root -json=./Summer23BPix_130X_local/config/GRL_JSON.txt -pu=./Summer23BPix_130X_local/config/PU/ -btag=./Summer23BPix_130X_local/config/BtagSF/ -lep=./Summer23BPix_130X_local/config/LepSF/ -jme=./Summer23BPix_130X_local/config/JME/ -metfile=./Summer23BPix_130X_local/config/METTrigger/Parameters.csv -prefirefile=./Summer23BPix_130X_local/config/Prefire/Prefire.root -xsjsonfile=./Summer23BPix_130X_local/config/XS_jsonfile.json -githash=local_test -split=1,2

# Run3 Cascades (Central)
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer23BPix_130X_Cascades_local.list --verbose --cascades --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/Run3Summer23BPixNanoAODv12/SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8/NANOAODSIM/130X_mcRun3_2023_realistic_postBPix_v6-v3/2520000/45161c49-7f6a-4d5f-8cc7-15382cad4682.root -ofile=Cascades_SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8_Summer23BPix_130X_SMS.root --cascades -tree=Events -dataset=SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8 -filetag=Summer23BPix_130X -eventcount=./Summer23BPix_130X_Cascades_local/config/EventCount.root -filtereff=./Summer23BPix_130X_Cascades_local/config/FilterEff.root -json=./Summer23BPix_130X_Cascades_local/config/GRL_JSON.txt -pu=./Summer23BPix_130X_Cascades_local/config/PU/ -btag=./Summer23BPix_130X_Cascades_local/config/BtagSF/ -lep=./Summer23BPix_130X_Cascades_local/config/LepSF/ -jme=./Summer23BPix_130X_Cascades_local/config/JME/ -metfile=./Summer23BPix_130X_Cascades_local/config/METTrigger/Parameters.csv -prefirefile=./Summer23BPix_130X_Cascades_local/config/Prefire/Prefire.root -xsjsonfile=./Summer23BPix_130X_Cascades_local/config/XS_jsonfile.json -githash=local_test -split=1,100

# Run3 Cascades (Private)
python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer22_130X_Cascades_local.list --verbose --cascades --privateMC --dryrun
./MakeReducedNtuple_NANO.x -ifile=root://cmseos.fnal.gov//store/user/lpcsusylep/cascadeMC/SlepSnuCascade_220-209_200-190-180_2022_NANO/250701_143707/0000/SlepSnuCascade_220-209_200-190-180_2022_NanoAODv12_1.root -ofile=CascadesPrivateMC_SlepSnuCascade_220-209_200-190-180_2022_NANO_Summer22_130X_Cascades.root --cascades --privateMC -tree=Events -dataset=SlepSnuCascade_220-209_200-190-180_2022_NANO_JustinPrivateMC_Summer22_130X_Cascades -filetag=Summer22_130X -eventcount=./Summer22_130X_Cascades_local/config/EventCount.root -filtereff=./Summer22_130X_Cascades_local/config/FilterEff.root -json=./Summer22_130X_Cascades_local/config/GRL_JSON.txt -pu=./Summer22_130X_Cascades_local/config/PU/ -btag=./Summer22_130X_Cascades_local/config/BtagSF/ -lep=./Summer22_130X_Cascades_local/config/LepSF/ -jme=./Summer22_130X_Cascades_local/config/JME/ -metfile=./Summer22_130X_Cascades_local/config/METTrigger/Parameters.csv -prefirefile=./Summer22_130X_Cascades_local/config/Prefire/Prefire.root -xsjsonfile=./Summer22_130X_Cascades_local/config/XS_jsonfile.json -githash=local_test -split=1,2

#### Use this set of options to process central cascades MC like old way (not recommended)
###python3 scripts/condor_submit_nano_connect_ntuples.py -list samples/NANO/Lists/Additional_Lists/Summer23BPix_130X_SMS_local.list --verbose --sms --dryrun
###./MakeReducedNtuple_NANO.x -ifile=root://cmsxrootd.fnal.gov//store/mc/Run3Summer23BPixNanoAODv12/SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8/NANOAODSIM/130X_mcRun3_2023_realistic_postBPix_v6-v3/2520000/45161c49-7f6a-4d5f-8cc7-15382cad4682.root -ofile=SMS_SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8_Summer23BPix_130X_SMS.root --cascades --sms -tree=Events -dataset=SlepSnuCascade_MN1-220_MN2-260_MC1-240_TuneCP5_13p6TeV_madgraphMLM-pythia8 -filetag=Summer23BPix_130X -eventcount=./Summer23BPix_130X_SMS_local/config/EventCount.root -filtereff=./Summer23BPix_130X_SMS_local/config/FilterEff.root -json=./Summer23BPix_130X_SMS_local/config/GRL_JSON.txt -pu=./Summer23BPix_130X_SMS_local/config/PU/ -btag=./Summer23BPix_130X_SMS_local/config/BtagSF/ -lep=./Summer23BPix_130X_SMS_local/config/LepSF/ -jme=./Summer23BPix_130X_SMS_local/config/JME/ -metfile=./Summer23BPix_130X_SMS_local/config/METTrigger/Parameters.csv -prefirefile=./Summer23BPix_130X_SMS_local/config/Prefire/Prefire.root -xsjsonfile=./Summer23BPix_130X_SMS_local/config/XS_jsonfile.json -githash=local_test -split=1,100

echo "Finished running era test!"
